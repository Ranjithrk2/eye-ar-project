<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Futuristic AR Eye Learning</title>

<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

<style>
body {
  margin:0;
  overflow:hidden;
  background:#050505;
  font-family: 'Orbitron', sans-serif;
}

a-text {
  text-shadow: 0 0 10px cyan, 0 0 20px cyan, 0 0 30px cyan;
}

@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');
</style>
</head>

<body>

<a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false">

<a-marker preset="hiro" id="marker">

  <!-- CENTER EYE -->
  <a-entity id="eyeModel"
    gltf-model="models/eye.glb"
    position="0 0 0"
    rotation="0 0 0"
    scale="3 3 3">
  </a-entity>


  <!-- ===== ORBIT BUTTONS ===== -->

  <!-- Cornea -->
  <a-sphere id="corneaBtn" class="clickable part"
    position="-1.4 0.8 0"
    radius="0.18"
    color="#00ffff"
    opacity="0.8">
    <a-text value="Cornea" align="center" position="0 0.3 0" scale="1 1 1"></a-text>
  </a-sphere>

  <!-- Iris -->
  <a-sphere id="irisBtn" class="clickable part"
    position="1.4 0.8 0"
    radius="0.18"
    color="#00ffff"
    opacity="0.8">
    <a-text value="Iris" align="center" position="0 0.3 0"></a-text>
  </a-sphere>

  <!-- Lens -->
  <a-sphere id="lensBtn" class="clickable part"
    position="-1.4 -0.8 0"
    radius="0.18"
    color="#00ffff"
    opacity="0.8">
    <a-text value="Lens" align="center" position="0 0.3 0"></a-text>
  </a-sphere>

  <!-- Retina -->
  <a-sphere id="retinaBtn" class="clickable part"
    position="1.4 -0.8 0"
    radius="0.18"
    color="#00ffff"
    opacity="0.8">
    <a-text value="Retina" align="center" position="0 0.3 0"></a-text>
  </a-sphere>

  <!-- Optic -->
  <a-sphere id="opticBtn" class="clickable part"
    position="0 -1.6 0"
    radius="0.18"
    color="#00ffff"
    opacity="0.8">
    <a-text value="Optic" align="center" position="0 0.3 0"></a-text>
  </a-sphere>


  <!-- ===== INFO PANEL ===== -->

  <a-plane id="infoPanel"
    position="0 1.9 0"
    width="3.2"
    height="1.4"
    color="#000"
    opacity="0.75"
    visible="false">
  </a-plane>

  <a-text id="infoText"
    position="0 1.9 0.01"
    align="center"
    color="#00ffff"
    wrap-count="40"
    scale="1.4 1.4 1.4"
    visible="false">
  </a-text>

</a-marker>


<!-- CAMERA -->
<a-entity camera>
  <a-cursor raycaster="objects: .clickable" color="#00ffff"></a-cursor>
</a-entity>

</a-scene>



<script>

const infoPanel = document.querySelector("#infoPanel");
const infoText = document.querySelector("#infoText");

const partsInfo = {

  corneaBtn:
  "Cornea: The transparent front surface of the eye that helps focus incoming light.",

  irisBtn:
  "Iris: The colored part of the eye that controls the size of the pupil and amount of light entering.",

  lensBtn:
  "Lens: A flexible structure that focuses light onto the retina for clear vision.",

  retinaBtn:
  "Retina: A light sensitive layer that converts light into electrical signals.",

  opticBtn:
  "Optic Nerve: Carries visual information from the retina to the brain."
};


// ===== SPEECH =====

function speak(message){

  window.speechSynthesis.cancel();

  const speech = new SpeechSynthesisUtterance(message);
  speech.rate = 0.9;
  speech.pitch = 1;
  speech.volume = 1;

  window.speechSynthesis.speak(speech);
}



// ===== SHOW INFO =====

function showInfo(id){

  const message = partsInfo[id];

  infoPanel.setAttribute("visible", true);
  infoText.setAttribute("visible", true);
  infoText.setAttribute("value", message);

  glowEffect(id);

  speak(message);
}



// ===== GLOW EFFECT =====

function glowEffect(id){

  document.querySelectorAll(".part").forEach(btn=>{
    btn.setAttribute("color","#00ffff");
    btn.setAttribute("scale","1 1 1");
  });

  const selected = document.getElementById(id);

  selected.setAttribute("color","#ffffff");
  selected.setAttribute("scale","1.4 1.4 1.4");
}



// ===== CLICK EVENTS =====

Object.keys(partsInfo).forEach(id => {

  const el = document.getElementById(id);

  el.addEventListener("click", ()=> showInfo(id));

  el.addEventListener("touchstart", e=>{
    e.preventDefault();
    showInfo(id);
  });

});



// ===== HIDE PANEL WHEN MARKER LOST =====

document.querySelector("#marker").addEventListener("markerLost", ()=>{

  infoPanel.setAttribute("visible", false);
  infoText.setAttribute("visible", false);

});

</script>

</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Eye AR</title>

  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <style>
    body { margin:0; overflow:hidden; }
  </style>
</head>

<body>

<a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">

  <a-marker preset="hiro">

    <!-- 3D Eye Model -->
    <a-entity
      id="eyeModel"
      gltf-model="models/eye.glb"
      scale="2 2 2"
      position="0 0 0"
      rotation="0 0 0"
      class="clickable">
    </a-entity>

    <!-- Info Text -->
    <a-text
      id="infoText"
      value="Tap the Eye"
      position="0 1.5 0"
      align="center"
      color="yellow"
      scale="2 2 2">
    </a-text>

    <!-- Company -->
    <a-text
      value="MR.TECHLAB LLP"
      position="0 -1.2 0"
      align="center"
      color="cyan">
    </a-text>

  </a-marker>

  <a-entity camera></a-entity>

</a-scene>

<script>
let model = document.querySelector("#eyeModel");
let info = document.querySelector("#infoText");


// Show info on tap
model.addEventListener("click", () => {
  info.setAttribute("value", "Human Eye: Tap and drag to rotate");
});


// Drag rotation (mobile + mouse)
let isDragging = false;
let previousX;

window.addEventListener("mousedown", startDrag);
window.addEventListener("touchstart", startDrag);

window.addEventListener("mousemove", drag);
window.addEventListener("touchmove", drag);

window.addEventListener("mouseup", endDrag);
window.addEventListener("touchend", endDrag);


function startDrag(e){
  isDragging = true;
  previousX = e.touches ? e.touches[0].clientX : e.clientX;
}

function drag(e){
  if(!isDragging) return;

  let currentX = e.touches ? e.touches[0].clientX : e.clientX;
  let delta = currentX - previousX;

  let rotation = model.getAttribute("rotation");
  rotation.y += delta * 0.5;

  model.setAttribute("rotation", rotation);

  previousX = currentX;
}

function endDrag(){
  isDragging = false;
}
</script>

</body>
</html>
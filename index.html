<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive AR Eye Learning</title>

  <!-- A-Frame & AR.js -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <!-- Futuristic CSS -->
  <style>
    body { margin:0; overflow:hidden; background:#0a0a0a; font-family: 'Orbitron', sans-serif; }
    a-text { text-shadow: 0 0 10px #0ff, 0 0 20px #0ff, 0 0 30px #0ff; }
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');
  </style>
</head>
<body>

<a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false">

  <!-- Marker -->
  <a-marker preset="hiro" id="marker">

    <!-- Center 3D Eye -->
    <a-entity
      id="eyeModel"
      gltf-model="models/eye.glb"
      position="0 0 0"
      rotation="0 0 0"
      scale="3 3 3">
    </a-entity>

    <!-- Sidebar / Floating Buttons for Eye Parts -->
    <a-entity id="eyeParts">

      <!-- Cornea Button -->
      <a-box id="corneaBtn" class="partBtn clickable"
        position="-1 0.5 0"
        depth="0.1" height="0.3" width="0.8"
        color="#0ff" opacity="0.6">
        <a-text value="Cornea" align="center" color="#000" position="0 0 0.06" width="2"></a-text>
      </a-box>

      <!-- Iris Button -->
      <a-box id="irisBtn" class="partBtn clickable"
        position="1 0.5 0"
        depth="0.1" height="0.3" width="0.8"
        color="#0ff" opacity="0.6">
        <a-text value="Iris" align="center" color="#000" position="0 0 0.06" width="2"></a-text>
      </a-box>

      <!-- Lens Button -->
      <a-box id="lensBtn" class="partBtn clickable"
        position="-1 -0.5 0"
        depth="0.1" height="0.3" width="0.8"
        color="#0ff" opacity="0.6">
        <a-text value="Lens" align="center" color="#000" position="0 0 0.06" width="2"></a-text>
      </a-box>

      <!-- Retina Button -->
      <a-box id="retinaBtn" class="partBtn clickable"
        position="1 -0.5 0"
        depth="0.1" height="0.3" width="0.8"
        color="#0ff" opacity="0.6">
        <a-text value="Retina" align="center" color="#000" position="0 0 0.06" width="2"></a-text>
      </a-box>

      <!-- Optic Nerve Button -->
      <a-box id="opticBtn" class="partBtn clickable"
        position="0 -1 0"
        depth="0.1" height="0.3" width="1.2"
        color="#0ff" opacity="0.6">
        <a-text value="Optic Nerve" align="center" color="#000" position="0 0 0.06" width="3"></a-text>
      </a-box>

    </a-entity>

    <!-- Info Panel -->
    <a-plane id="infoPanel" position="0 1.8 0" width="3" height="1.5" color="#000" opacity="0.8" visible="false"></a-plane>
    <a-text id="infoText" position="0 1.8 0.01" align="center" color="#0ff" wrap-count="40" scale="1.5 1.5 1.5" visible="false"></a-text>

  </a-marker>

  <!-- Camera + cursor for mobile -->
  <a-entity camera>
    <a-cursor fuse="false" raycaster="objects: .clickable" color="#0ff"></a-cursor>
  </a-entity>

</a-scene>

<script>
  const infoPanel = document.querySelector("#infoPanel");
  const infoText = document.querySelector("#infoText");

  const partsInfo = {
    "corneaBtn": "Cornea: The transparent front surface that helps focus incoming light.",
    "irisBtn": "Iris: The colored part of the eye that controls pupil size.",
    "lensBtn": "Lens: Focuses light onto the retina.",
    "retinaBtn": "Retina: Converts light into electrical signals.",
    "opticBtn": "Optic Nerve: Transmits signals from retina to brain."
  };

  // Speak function
  function speak(message){
    window.speechSynthesis.cancel();
    let speech = new SpeechSynthesisUtterance(message);
    speech.rate = 0.9;
    speech.pitch = 1;
    speech.volume = 1;
    window.speechSynthesis.speak(speech);
  }

  // Click/touch handler for each part
  Object.keys(partsInfo).forEach(id => {
    const part = document.querySelector("#"+id);
    part.addEventListener("click", () => showPartInfo(id));
    part.addEventListener("touchstart", (e) => {
      e.preventDefault();
      showPartInfo(id);
    });
  });

  function showPartInfo(id){
    const message = partsInfo[id];
    infoPanel.setAttribute("visible", true);
    infoText.setAttribute("visible", true);
    infoText.setAttribute("value", message);
    speak(message);
  }

  // Hide info when marker is lost (optional)
  document.querySelector("#marker").addEventListener("markerLost", ()=>{
    infoPanel.setAttribute("visible", false);
    infoText.setAttribute("visible", false);
  });

</script>
</body>
</html>